1、配置参数
config set notify-keyspace-events Ex
2、订阅频道。
PSUBSCRIBE __keyevent@*__:expired   //订阅键事件频道，关注点是“过期事件”以及哪个键过期了   //发生了什么事件（键过期）以及哪个键过期了。
PSUBSCRIBE __keyspace@*__:expired   //订阅键空间频道，关注点是“某个键”发生了过期事件      //哪个键发生了什么事件（过期）。
仅支持一个命令。其中expired是一个特定的事件类型，它表示某个键（key）因其生存时间（TTL）耗尽而被 Redis 服务器自动删除。
__keyevent@0__这里的0是第几个数据库，如果监听的是第二个数据库就改为1，如果是所有数据库改为*
3、设置key及过期时间
172.16.48.103:6379> setex mykey 5 redis
OK
4、5s后会展示过期key
172.16.48.103:6379> PSUBSCRIBE __keyevent@*__:expired
1) "psubscribe"
2) "__keyevent@*__:expired"
3) (integer) 1
1) "pmessage"
2) "__keyevent@*__:expired"
3) "__keyevent@0__:expired"
4) "mykey"


/*
notify-keyspace-events 的参数是下列字符的任意组合，定义了服务器将发送哪些类型的通知。
字符：发送的通知。
K：键空间通知，所有通知以__keyspace@<db>__为前缀。
E：键事件通知，所有通知以__keyevent@<db>__为前缀。
g：DEL、EXPIRE、RENAME 等类型无关的通用命令的通知。
$：字符串命令的通知。
l：列表命令的通知。
s：集合命令的通知。
h：哈希命令的通知。
z：有序集合命令的通知。
x：过期事件，每当有过期键被删除时发送。
e：驱逐（evict）事件，每当有键因为 maxmemory 策略而被删除时发送。
A：参数 g$lshzxe 的别名。开启键空间通知将消耗 CPU 计算资源，故该通知默认关闭。如果定义服务器发送某些通知，输入参数需必选 K 或 E；如订阅键事件中驱逐事件相关的通知，参数填写为“Ee”；如订阅发送所有类型的通知，参数填写为“AKE”。
*/
